# DLite, A* and Sequential A* algorithms

## Требования

Для сборки и запуска возможно использовать QMake или CMake. CMakeLists.txt и .pro файлы доступны в репозитории. Подробные требования к ПО указаны ниже. 

### Linux
- CMake 3.2 или выше;
- GCC 4.9 или выше;
- Make
- QtCreator и Qt5 (по желанию).

### Mac
- CMake 3.2 или выше;
- Apple LLVM version 10.0.0 (clang-1000.11.45.5) или выше;
- Make
- QtCreator и Qt5 (по желанию).

### Windows
- CMake 3.2 или выше;
- MinGW-w64 5.0.3 или выше (должен быть добавлен в переменную среды Path);
- QtCreator и Qt5 (по желанию).

Проект использует C++17 стандарт.

## Начало работы
Cоздайте ответвление (fork) этого репозитория в свой GitHub аккаунт. Загрузите содержимое полученного репозитория, либо клонируйте его в нужную вам директорию.
```bash
git https://github.com/Just-ne-Just/PathPlanningProject.git
```

или (с помощью ssh)

```bash
git@github.com:Just-ne-Just/PathPlanningProject.git
```

или просто скачать архив с файлами

### Сборка и запуск

Сборку проекта возможно осуществить двумя способами:
- Используя QtCreator и qmake;
- Используя CMake.
  
При использовании QtCreator требуется открыть файл `ASearch.pro` который находится в директории `.../PathPlanningProject/Src/` и настроить проект с нужным комплектом сборки.

![qt_open](./Images/qt1.png)

После выбора проекта требуется установить имя входного файла как аргумент командной строки. Например, `.../PathPlanningProject/Examples/example.xml`. Для установки аргументов командной строки перейдите в настройки запуска проекта и введите нужный путь к файлу в поле "Параметры командной строки".

![qt_arg](./Images/qt2.png)

После установки аргумента командной строки можно проверить работу программы. Результат работы программы запишутся в <map_name>_log.xml файл


При использовании CMake сборка и запуск может производиться как из командной строки, так и при помощи различных IDE (например JetBrains CLion). Ниже приведены скрипты сборки и запуска с использованием командной строки.

### Linux и Mac
Release сборка:
```bash
cd PathPlanningProject
cd Build
cd Release
cmake ../../ -DCMAKE_BUILD_TYPE="Release"
make
make install
```

Запуск:
```bash
cd ../../Bin/Release/
./Andrew_Semakov_ASearch ../../Examples/example.xml
```
Результат запуска будет сохранен в соответствующий xml файл.

### Windows
Release сборка:
```cmd
cd PathPlanningProject
cd Build
cd Release
set PATH
cmake ../../ -DCMAKE_BUILD_TYPE="Release" -G "MinGW Makefiles"
mingw32-make
mingw32-make install
```

Запуск:
```cmd
cd ../../Bin/Release/
Andrew_Semakov_ASearch.exe ../../Examples/example.xml
```

Результат запуска будет сохранен в соответствующий xml файл.

## Описание входных данных

### Информация о карте заносится в тэг ```<map>```
- `<width>` - Ширина карты
- `<height>` - Высота карты
- `<cellsize>` - Величина сектора
- `<startx>` `<starty>` - Стартовые координаты
- `<finishx>` `<finishy>` - Конечные координаты
- `<visibility>` - Область видимости агента (только для DLite и Sequential A*)
- `<grid>` - Внутри этого тэга во вспомогательных тэгах `<row>` задается сама карта, где `1` - препятствие, `0` - свободный сектор

### Информация об окружающей среде заносится в тэг ```<algorithm>```
- `<searchtype>` - Тип аллгоритма поиска пути. Может быть равен `astar - A*`, `seqastar - Sequential A*`, `dlite - DLite`
- `<metrictype>` - Тип используемой эвристики. Может быть равен `diagonal`, `manhattan`, `euclidean`, `chebyshev`
- `<hweight>` - Вес эвристики
- `<allowdiagonal>` - Разрешено или нет агенту ходить по диагонали
- `<cutcorners>` - Разрешено или нет агенту срезать углы
- `<allowsqueeze>` - Разрешено или нет срезать два угла сразу

###

## Описание выходных данных
Описание карты аналогично входным данным.

### Информация о результате работы программы заносится в тэг ```<log>```
- `<mapfilename>` - Путь до входного файла
- `<summary>` - Содержит результат работы программы: `количество итераций алгоритма`, `количество обработанных вершин`, `длина найденного пути`, `длина с учетом разммера сектора`, `время работы алгоритма в секундах`, `объем памяти, затраченный на создание обрабатывваемых вершин`.
- `<path>` - Входная карта с построенным путем.
- `<lplevel>` - Покоординатный путь
- `<hplevel>` - Путь с сокращенными прямыи участками

## Визуализация
Для использования визуализатора нужен Pycharm.

Откройте файл `Visual/visual.py` в Pycharm после того как отработал основной алгроритм. Убедитесь, что в директории есть файл `out`. Если такого файла нет, перезапустите основной алгоритм.

Запустите скрипт. Отрисовка пути может занять некоторое время.
